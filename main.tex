\documentclass[12pt,reqno,toc=sectionentrywithdots,toc=indent]{article}

%Below are some necessary packages for your course.
\usepackage{amsfonts,latexsym,amsthm,amssymb,amsmath,amscd,euscript}
\usepackage[usenames,dvipsnames]{xcolor}
\usepackage{framed}
\usepackage{fullpage}
\usepackage{hyperref}
\usepackage{color}
\usepackage{lipsum}
\usepackage{bold-extra}
\usepackage{fancyhdr}
\usepackage{subfiles}
\usepackage{calc}
\usepackage{tikz}
\usepackage[reftex]{theoremref}
\usetikzlibrary{shapes, arrows}
\usetikzlibrary{shapes.geometric}
\usepackage{chngcntr}
\counterwithin{figure}{section}

\usepackage{float}
\usepackage{listings}
\usepackage{titletoc,tocloft}
\setlength{\cftsecindent}{1cm}
\setlength{\cftsubsecindent}{2cm}
\setlength{\cftsubsubsecindent}{3cm}
%\dottedcontents{section}[3.8em]{}{2.3em}{1pc}
%\dottedcontents{subsection}[6.1em]{}{3.2em}{1pc}


%\setlength{\cftsecindent}{2cm}
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

 
\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}
 
\lstset{style=mystyle}

\usepackage[margin=1in,heightrounded]{geometry}
\geometry{headsep=33pt}
\geometry{foot=33pt}

%Color setup for table of contents
\hypersetup{colorlinks=true,citecolor=blue,urlcolor =black,linkbordercolor={1 0 0}}

%Define a bunch of useful colors
\definecolor{bluepigment}{rgb}{0.2, 0.2, 0.6}
\definecolor{cobalt}{rgb}{0.0, 0.28, 0.67}
\definecolor{darkpowderblue}{rgb}{0.0, 0.2, 0.6}
\definecolor{egyptianblue}{rgb}{0.06, 0.2, 0.65}
\definecolor{lapislazuli}{rgb}{0.15, 0.38, 0.61}
\definecolor{tealblue}{rgb}{0.21, 0.46, 0.53}
\definecolor{darktealblue}{rgb}{0.11, 0.36, 0.43}
\definecolor{zaffre}{rgb}{0.0, 0.08, 0.66}
\definecolor{arsenic}{rgb}{0.23, 0.27, 0.29}
\definecolor{bulgarianrose}{rgb}{0.28, 0.02, 0.03}
\definecolor{aurometalsaurus}{rgb}{0.43, 0.5, 0.5}

% Not sure what this does but it looks important
\allowdisplaybreaks[1]

%Allows for following patches
\usepackage{etoolbox}

\makeatletter
%Patching maketitle to insert a date
%Source unknown, somewhere on stack overflow
\patchcmd{\@maketitle}
  {\ifx\@empty\@dedicatory}
  {\ifx\@empty\@date \else {\vskip3ex \centering\footnotesize\@date\par\vskip1ex}\fi
   \ifx\@empty\@dedicatory}
  {}{}
\patchcmd{\@adminfootnotes}
  {\ifx\@empty\@date\else \@footnotetext{\@setdate}\fi}
  {}{}{}

%defining section to have custom formatting
%Original is 
%\def\section{\@startsection{section}{1}%
  %\z@{.7\linespacing\@plus\linespacing}{.5\linespacing}%
  %{\normalfont\scshape\centering}}
%\def\subsection{\@startsection{subsection}{2}%
  %\z@{.5\linespacing\@plus.7\linespacing}{-.5em}%
  %{\normalfont\bfseries}}
%\def\subsubsection{\@startsection{subsubsection}{3}%
  %\z@{.5\linespacing\@plus.7\linespacing}{-.5em}%
  %{\normalfont\itshape}}
%Explanation of \@startsection is at http://infohost.nmt.edu/tcc/help/pubs/nmtthesis/old/annotated/at.startsection.html


% Create some custom enviornments, with colors.
\newenvironment{theorem_blue}{\color{zaffre}\begin{theorem}}{\color[rgb]{0,0,0}\end{theorem}}

%Math 55 Originals
\newtheoremstyle{break}
  {\topsep}{\topsep}%
  {}{}%
  {\bfseries}{}%
  {\newline}{}%
\theoremstyle{break}
\newtheorem{theorem}{Theorem}[subsection]

\newcommand{\docname}{Title}

%Title and Header setup
\title{FTC Programming Guide} % IMPORTANT: Change the title as needed
\date{\today}
\pagestyle{fancy}
\lhead{Dwight-Englewood Robotics}
\rhead{\thesubsection}
\setlength{\headheight}{14pt}

\raggedbottom
\begin{document}
% set color of links for table of contents
\hypersetup{linkcolor=lapislazuli}

%Title Page Setup
\maketitle
\thispagestyle{fancy}
\vspace*{-0.25in}
\centerline{Dwight-Englewood Robotics}
\vspace*{0.15in}
\setcounter{tocdepth}{3}
\tableofcontents
\newpage

%Begin the stuff!
%This version of the template has some placeholder stuff so you can see what it looks like
\subfile{sections/controlSystem/1.tex}
\subfile{sections/programming/2.tex}
\subfile{sections/vision/1.tex}
\end{document}
